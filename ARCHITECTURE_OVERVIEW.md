# üèóÔ∏è –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–´–ô –û–ë–ó–û–† –°–ò–°–¢–ï–ú–´

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è**: 9 –æ–∫—Ç—è–±—Ä—è 2025, 22:00  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è —Å–∏—Å—Ç–µ–º–∞

---

## üìã –û–ë–©–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### üéØ –ü—Ä–∏–Ω—Ü–∏–ø—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å**: –ö–∞–∂–¥—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –æ–±–ª–∞—Å—Ç—å
- **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**: Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã –Ω–∞ –∫–∞–∂–¥–æ–º —É—Ä–æ–≤–Ω–µ
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –õ–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

### üîÑ –°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend      ‚îÇ    ‚îÇ   Flask App     ‚îÇ    ‚îÇ   External APIs ‚îÇ
‚îÇ   (Browser)     ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (Backend)     ‚îÇ‚óÑ‚îÄ‚îÄ‚ñ∫‚îÇ   (Apify, AI)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚îÇ                       ‚îÇ                       ‚îÇ
         ‚ñº                       ‚ñº                       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   WebSocket     ‚îÇ    ‚îÇ   Database      ‚îÇ    ‚îÇ   File Storage  ‚îÇ
‚îÇ   (Real-time)   ‚îÇ    ‚îÇ   (SQLite)      ‚îÇ    ‚îÇ   (Static)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üóÇÔ∏è –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê

### üìÅ –ö–æ—Ä–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
```
/Users/mikhaileliseev/Desktop/–ö–ó GSR/
‚îú‚îÄ‚îÄ app_current_backup.py          # üéØ –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt               # üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ 7411193.png                   # üñºÔ∏è Favicon
‚îú‚îÄ‚îÄ api/                          # üîå API –∫–ª–∏–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ templates/                    # üé® HTML —à–∞–±–ª–æ–Ω—ã
‚îú‚îÄ‚îÄ static/                       # üìÅ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ uploads/                      # üì§ –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ logs/                         # üìù –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ docs/                         # üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

### üîå API –∫–ª–∏–µ–Ω—Ç—ã (api/)
```
api/
‚îú‚îÄ‚îÄ apify_client.py               # üìä Instagram Reel Scraper
‚îú‚îÄ‚îÄ assemblyai_client_improved.py # üé§ Speech-to-Text
‚îú‚îÄ‚îÄ openai_client.py              # ü§ñ Text Rewriting
‚îú‚îÄ‚îÄ elevenlabs_simple.py          # üîä Text-to-Speech
‚îú‚îÄ‚îÄ heygen_client.py              # üé¨ Video Generation
‚îî‚îÄ‚îÄ gemini_client.py              # üß† AI Fallback
```

### üé® –®–∞–±–ª–æ–Ω—ã (templates/)
```
templates/
‚îú‚îÄ‚îÄ base.html                     # üè† –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω
‚îú‚îÄ‚îÄ module_trends.html            # üìà –ú–æ–¥—É–ª—å —Ç—Ä–µ–Ω–¥–æ–≤
‚îú‚îÄ‚îÄ module_vacancies.html         # üíº –ú–æ–¥—É–ª—å –≤–∞–∫–∞–Ω—Å–∏–π
‚îî‚îÄ‚îÄ module_experts.html           # üë• –ú–æ–¥—É–ª—å —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
```

---

## üîß –ö–õ–Æ–ß–ï–í–´–ï –§–ê–ô–õ–´

### 1. app_current_backup.py - –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- **Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- **API endpoints**: –í—Å–µ REST API –º–∞—Ä—à—Ä—É—Ç—ã
- **WebSocket**: Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **Middleware**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—à–∏–±–æ–∫

#### üîß –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```python
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Flask
app = Flask(__name__)
socketio = SocketIO(app, cors_allowed_origins="*")

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
db = SQLAlchemy(app)

# API endpoints
@app.route('/api/trends/collect-reels', methods=['POST'])
@app.route('/api/trends/transcribe', methods=['POST'])
@app.route('/api/trends/rewrite', methods=['POST'])
@app.route('/api/trends/generate-audio', methods=['POST'])

# WebSocket events
@socketio.on('connect')
@socketio.on('disconnect')
```

#### ‚öôÔ∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–ü–æ—Ä—Ç**: 5000 (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω —Å 5001)
- **–¢–∞–π–º–∞—É—Ç—ã**: Flask-level —Å threading.Timer
- **CSP**: Content Security Policy –∑–∞–≥–æ–ª–æ–≤–∫–∏
- **Favicon**: Route –¥–ª—è /favicon.ico

#### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~1,500 —Å—Ç—Ä–æ–∫
- **API endpoints**: 15+ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- **WebSocket events**: 5 —Å–æ–±—ã—Ç–∏–π
- **Middleware**: 3 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞

---

### 2. api/apify_client.py - Instagram Reel Scraper

#### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- **–°–±–æ—Ä —Ä–∏–ª—Å–æ–≤**: –ü–∞—Ä—Å–∏–Ω–≥ Instagram –ø–æ—Å—Ç–æ–≤
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**: –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
- **Fallback**: –î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- **Retry –ª–æ–≥–∏–∫–∞**: –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏

#### üîß –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã
```python
def scrape_user_posts(self, username: str, count: int) -> List[Dict]
def process_instagram_posts(self, raw_posts: List[Dict]) -> List[Dict]
def _get_fallback_posts(self, username: str, count: int) -> List[Dict]
```

#### ‚öôÔ∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–¢–∞–π–º–∞—É—Ç Apify**: 180 —Å–µ–∫—É–Ω–¥ (3 –º–∏–Ω—É—Ç—ã)
- **Retry attempts**: 3 –ø–æ–ø—ã—Ç–∫–∏
- **Fallback –¥–∞–Ω–Ω—ã–µ**: –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **–ê–∫—Ç–æ—Ä—ã**: 2 —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∞–∫—Ç–æ—Ä–∞

#### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~400 —Å—Ç—Ä–æ–∫
- **–ú–µ—Ç–æ–¥—ã**: 8 –æ—Å–Ω–æ–≤–Ω—ã—Ö
- **Fallback –≤–∞—Ä–∏–∞–Ω—Ç—ã**: 5 –¥–µ–º–æ-–ø–æ—Å—Ç–æ–≤
- **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã–µ –ø–æ–ª—è**: 15+ –º–µ—Ç—Ä–∏–∫

---

### 3. api/assemblyai_client_improved.py - Speech-to-Text

#### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è**: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∞—É–¥–∏–æ –≤ —Ç–µ–∫—Å—Ç
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ URL**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤
- **Fallback**: –î–µ–º–æ-—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ –¥–ª—è Instagram URL
- **–ö–∞—á–µ—Å—Ç–≤–æ**: –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

#### üîß –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã
```python
def transcribe_audio_url_sync(self, audio_url: str) -> str
def test_connection(self) -> bool
def _detect_instagram_url(self, url: str) -> bool
```

#### ‚öôÔ∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–¢–∞–π–º–∞—É—Ç**: 60 —Å–µ–∫—É–Ω–¥
- **Fallback —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏**: 5 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- **Instagram URL**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
- **–ö–∞—á–µ—Å—Ç–≤–æ**: –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è

#### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~200 —Å—Ç—Ä–æ–∫
- **–ú–µ—Ç–æ–¥—ã**: 5 –æ—Å–Ω–æ–≤–Ω—ã—Ö
- **Fallback –≤–∞—Ä–∏–∞–Ω—Ç—ã**: 5 –¥–µ–º–æ-—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π
- **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã**: MP3, MP4, WAV

---

### 4. api/openai_client.py - Text Rewriting

#### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- **–ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ**: –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –≤–∏–¥–µ–æ
- **AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: OpenAI Chat Completion API
- **Fallback**: Google Gemini API
- **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π fallback**: –° —ç–º–æ–¥–∑–∏ –∏ –ø—Ä–∏–∑—ã–≤–æ–º –∫ –¥–µ–π—Å—Ç–≤–∏—é

#### üîß –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã
```python
def rewrite_text(self, text: str) -> str
def _chat_completion(self, prompt: str) -> str
def _gemini_request(self, prompt: str) -> str
def _create_quality_fallback(self, original_text: str) -> str
```

#### ‚öôÔ∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **max_tokens**: 4000 (—É–≤–µ–ª–∏—á–µ–Ω–æ —Å 1000)
- **–ú–æ–¥–µ–ª—å**: gpt-3.5-turbo
- **Fallback —Ü–µ–ø–æ—á–∫–∞**: OpenAI ‚Üí Gemini ‚Üí Quality Fallback
- **–≠–º–æ–¥–∑–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –ø–æ —Ç–µ–º–∞—Ç–∏–∫–µ

#### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~300 —Å—Ç—Ä–æ–∫
- **–ú–µ—Ç–æ–¥—ã**: 6 –æ—Å–Ω–æ–≤–Ω—ã—Ö
- **Fallback —É—Ä–æ–≤–Ω–∏**: 3 —É—Ä–æ–≤–Ω—è
- **–≠–º–æ–¥–∑–∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã**: 10+ —Ç–µ–º–∞—Ç–∏–∫

---

### 5. api/elevenlabs_simple.py - Text-to-Speech

#### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ**: –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –≤ —Ä–µ—á—å
- **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –≥–æ–ª–æ—Å–∞**: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ API
- **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: Stability, similarity_boost
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Plyr**: –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∞—É–¥–∏–æ

#### üîß –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã
```python
def get_all_available_voices_from_api(self) -> List[Dict]
def generate_audio_with_parameters(self, text: str, voice_id: str, 
                                  stability: float, similarity_boost: float) -> str
def _save_audio_to_static(self, audio_data: bytes) -> str
```

#### ‚öôÔ∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–ú–æ–¥–µ–ª—å**: eleven_multilingual_v2
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: Stability, similarity_boost, style
- **–§–æ—Ä–º–∞—Ç**: MP3, –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ**: –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã

#### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~250 —Å—Ç—Ä–æ–∫
- **–ú–µ—Ç–æ–¥—ã**: 8 –æ—Å–Ω–æ–≤–Ω—ã—Ö
- **–ì–æ–ª–æ—Å–∞**: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏**: 3 –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞

---

### 6. templates/module_trends.html - UI –º–æ–¥—É–ª—è —Ç—Ä–µ–Ω–¥–æ–≤

#### üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: 5-—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å
- **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: WebSocket –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: JavaScript —Ñ—É–Ω–∫—Ü–∏–∏
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Textarea –¥–ª—è —Ç–µ–∫—Å—Ç–∞

#### üîß –ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
```html
<!-- Step 1: –°–±–æ—Ä —Ä–∏–ª—Å–æ–≤ -->
<div id="step1" class="step">
    <button onclick="collectReels()">–°–æ–±—Ä–∞—Ç—å —Ä–∏–ª—Å—ã</button>
</div>

<!-- Step 5: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ -->
<textarea id="editableText" class="form-control" rows="6"></textarea>
<div id="textStats">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ–∫—Å—Ç–∞</div>
```

#### ‚öôÔ∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **JavaScript —Ç–∞–π–º–∞—É—Ç**: 200 —Å–µ–∫—É–Ω–¥
- **WebSocket**: Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- **Plyr.js**: –ê—É–¥–∏–æ –ø–ª–µ–µ—Ä
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –°–∏–º–≤–æ–ª—ã –∏ –≤—Ä–µ–º—è

#### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞**: ~800 —Å—Ç—Ä–æ–∫
- **JavaScript —Ñ—É–Ω–∫—Ü–∏–∏**: 15+ —Ñ—É–Ω–∫—Ü–∏–π
- **–®–∞–≥–∏**: 5 –æ—Å–Ω–æ–≤–Ω—ã—Ö —à–∞–≥–æ–≤
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**: 20+ —ç–ª–µ–º–µ–Ω—Ç–æ–≤

---

## üîÑ –î–ò–ê–ì–†–ê–ú–ú–ê –ü–û–¢–û–ö–ê –î–ê–ù–ù–´–•

### Step 1: –°–±–æ—Ä —Ä–∏–ª—Å–æ–≤
```
User Input ‚Üí Flask ‚Üí Apify API ‚Üí Data Processing ‚Üí Fallback Check ‚Üí Response
     ‚îÇ           ‚îÇ         ‚îÇ            ‚îÇ              ‚îÇ           ‚îÇ
     ‚îÇ           ‚îÇ         ‚îÇ            ‚îÇ              ‚îÇ           ‚îÇ
     ‚ñº           ‚ñº         ‚ñº            ‚ñº              ‚ñº           ‚ñº
Competitors ‚Üí Endpoint ‚Üí Instagram ‚Üí Normalize ‚Üí Demo Data ‚Üí JSON
```

### Step 2: –í—ã–±–æ—Ä —Ä–∏–ª—Å–∞
```
Collected Data ‚Üí UI Display ‚Üí User Selection ‚Üí Preview ‚Üí Selection
       ‚îÇ              ‚îÇ            ‚îÇ           ‚îÇ         ‚îÇ
       ‚îÇ              ‚îÇ            ‚îÇ           ‚îÇ         ‚îÇ
       ‚ñº              ‚ñº            ‚ñº           ‚ñº         ‚ñº
   JSON Data ‚Üí Card Display ‚Üí Click Event ‚Üí Modal ‚Üí Selected Reel
```

### Step 3: –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è
```
Video URL ‚Üí Flask ‚Üí AssemblyAI ‚Üí Speech-to-Text ‚Üí Fallback Check ‚Üí Transcript
     ‚îÇ         ‚îÇ         ‚îÇ            ‚îÇ              ‚îÇ           ‚îÇ
     ‚îÇ         ‚îÇ         ‚îÇ            ‚îÇ              ‚îÇ           ‚îÇ
     ‚ñº         ‚ñº         ‚ñº            ‚ñº              ‚ñº           ‚ñº
Instagram ‚Üí Endpoint ‚Üí API Call ‚Üí Processing ‚Üí Demo Transcript ‚Üí Text
```

### Step 4: –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ
```
Transcript ‚Üí Flask ‚Üí OpenAI API ‚Üí Chat Completion ‚Üí Fallback Chain ‚Üí Rewritten Text
     ‚îÇ         ‚îÇ         ‚îÇ            ‚îÇ              ‚îÇ              ‚îÇ
     ‚îÇ         ‚îÇ         ‚îÇ            ‚îÇ              ‚îÇ              ‚îÇ
     ‚ñº         ‚ñº         ‚ñº            ‚ñº              ‚ñº              ‚ñº
   Text ‚Üí Endpoint ‚Üí API Call ‚Üí AI Processing ‚Üí Gemini ‚Üí Quality Fallback ‚Üí Enhanced Text
```

### Step 5: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ
```
Rewritten Text ‚Üí Flask ‚Üí ElevenLabs ‚Üí TTS ‚Üí Audio File ‚Üí Plyr Player ‚Üí Audio
       ‚îÇ            ‚îÇ         ‚îÇ        ‚îÇ        ‚îÇ           ‚îÇ         ‚îÇ
       ‚îÇ            ‚îÇ         ‚îÇ        ‚îÇ        ‚îÇ           ‚îÇ         ‚îÇ
       ‚ñº            ‚ñº         ‚ñº        ‚ñº        ‚ñº           ‚ñº         ‚ñº
   User Edit ‚Üí Endpoint ‚Üí API Call ‚Üí Processing ‚Üí Static File ‚Üí Player ‚Üí Playback
```

---

## üîå API ENDPOINTS

### üìä Trends Module
```
POST /api/trends/collect-reels    - –°–±–æ—Ä —Ä–∏–ª—Å–æ–≤ –æ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
POST /api/trends/transcribe      - –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –≤–∏–¥–µ–æ
POST /api/trends/rewrite          - –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞
POST /api/trends/generate-audio  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞—É–¥–∏–æ
GET  /api/trends/list-voices     - –°–ø–∏—Å–æ–∫ –≥–æ–ª–æ—Å–æ–≤ ElevenLabs
```

### üíº Vacancies Module
```
GET  /api/vacancies              - –°–ø–∏—Å–æ–∫ –≤–∞–∫–∞–Ω—Å–∏–π
POST /api/vacancies              - –°–æ–∑–¥–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏
PUT  /api/vacancies/<id>         - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏
DELETE /api/vacancies/<id>       - –£–¥–∞–ª–µ–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏
```

### üë• Experts Module
```
GET  /api/experts                - –°–ø–∏—Å–æ–∫ —ç–∫—Å–ø–µ—Ä—Ç–æ–≤
POST /api/experts                - –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫—Å–ø–µ—Ä—Ç–∞
PUT  /api/experts/<id>           - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä—Ç–∞
DELETE /api/experts/<id>         - –£–¥–∞–ª–µ–Ω–∏–µ —ç–∫—Å–ø–µ—Ä—Ç–∞
```

### üé® Static Files
```
GET  /favicon.ico                - Favicon
GET  /static/<path>              - –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
GET  /uploads/<path>             - –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```

---

## ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò –¢–ê–ô–ú–ê–£–¢–û–í

### üïê –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–∞–π–º–∞—É—Ç—ã
```
Apify Actor:          180 —Å–µ–∫—É–Ω–¥ (3 –º–∏–Ω—É—Ç—ã)
Flask collect-reels:  190 —Å–µ–∫—É–Ω–¥ (3.2 –º–∏–Ω—É—Ç—ã)
Flask transcribe:     60 —Å–µ–∫—É–Ω–¥ (1 –º–∏–Ω—É—Ç–∞)
JavaScript fetch:     200 —Å–µ–∫—É–Ω–¥ (3.3 –º–∏–Ω—É—Ç—ã)
AssemblyAI:           60 —Å–µ–∫—É–Ω–¥ (1 –º–∏–Ω—É—Ç–∞)
```

### üîÑ Fallback —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
```
Apify ‚Üí Demo Data (—Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏)
AssemblyAI ‚Üí Demo Transcripts (5 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
OpenAI ‚Üí Gemini ‚Üí Quality Fallback (—Å —ç–º–æ–¥–∑–∏)
ElevenLabs ‚Üí Error Message (—Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏)
```

---

## üóÑÔ∏è –ë–ê–ó–ê –î–ê–ù–ù–´–•

### üìä –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
```python
class TrendAnalysis(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    competitors = db.Column(db.Text)
    reels_data = db.Column(db.Text)
    created_at = db.Column(db.DateTime, default=datetime.utcnow)

class CompetitorData(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(100))
    posts_data = db.Column(db.Text)
    analysis_id = db.Column(db.Integer, db.ForeignKey('trend_analysis.id'))
```

### üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∏
- **–¢–∏–ø**: SQLite (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- **–ú–∏–≥—Ä–∞—Ü–∏–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ
- **Backup**: –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±–µ–∫–∞–ø—ã
- **–ò–Ω–¥–µ–∫—Å—ã**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

---

## üìÅ –§–ê–ô–õ–û–í–û–ï –•–†–ê–ù–ò–õ–ò–©–ï

### üì§ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
```
static/
‚îú‚îÄ‚îÄ css/                          # –°—Ç–∏–ª–∏
‚îú‚îÄ‚îÄ js/                          # JavaScript
‚îú‚îÄ‚îÄ images/                      # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ audio/                       # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞—É–¥–∏–æ
```

### üì• –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
```
uploads/
‚îú‚îÄ‚îÄ videos/                      # –í–∏–¥–µ–æ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ audio/                       # –ê—É–¥–∏–æ —Ñ–∞–π–ª—ã
‚îî‚îÄ‚îÄ documents/                   # –î–æ–∫—É–º–µ–Ω—Ç—ã
```

### üìù –õ–æ–≥–∏
```
logs/
‚îú‚îÄ‚îÄ app.log                      # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ error.log                    # –û—à–∏–±–∫–∏
‚îî‚îÄ‚îÄ access.log                   # –î–æ—Å—Ç—É–ø—ã
```

---

## üîí –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨

### üõ°Ô∏è –ú–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- **CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏**: Content Security Policy
- **CORS**: Cross-Origin Resource Sharing
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **API –∫–ª—é—á–∏**: –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **API –∫–ª—é—á–∏**: –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- **–°–µ—Å—Å–∏–∏**: Flask sessions
- **CSRF**: –ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫

---

## üìä –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã API
- **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: WebSocket —Å–æ–±—ã—Ç–∏—è
- **–¢–∞–π–º–∞—É—Ç—ã**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
- **Fallback**: –ë—ã—Å—Ç—Ä—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã

### üìà –ú–µ—Ç—Ä–∏–∫–∏
- **–í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞**: < 200ms –¥–ª—è UI
- **API –≤—Ä–µ–º—è**: 30-180 —Å–µ–∫—É–Ω–¥
- **–ü–∞–º—è—Ç—å**: < 500MB
- **CPU**: < 50% –Ω–∞–≥—Ä—É–∑–∫–∞

---

## üöÄ –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ï

### üê≥ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```dockerfile
FROM python:3.9-slim
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
EXPOSE 5000
CMD ["python", "app_current_backup.py"]
```

### üñ•Ô∏è Systemd (—Ç–µ–∫—É—â–∏–π)
```ini
[Unit]
Description=GSR Content Factory
After=network.target

[Service]
Type=simple
User=root
WorkingDirectory=/var/www/gsr-content-factory
ExecStart=/usr/bin/python3 app_current_backup.py
Restart=always

[Install]
WantedBy=multi-user.target
```

### üåê Nginx
```nginx
server {
    listen 80;
    server_name 72.56.66.228;
    
    location / {
        proxy_pass http://127.0.0.1:5000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

---

## üîß –ó–ê–í–ò–°–ò–ú–û–°–¢–ò

### üì¶ Python –ø–∞–∫–µ—Ç—ã
```
Flask==2.3.3
Flask-SocketIO==5.3.6
Flask-SQLAlchemy==3.0.5
requests==2.31.0
httpx==0.28.1
apify-client==1.7.0
openai==1.3.0
elevenlabs==0.2.26
```

### üåê –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- **Apify**: Instagram Reel Scraper
- **AssemblyAI**: Speech-to-Text
- **OpenAI**: Text Rewriting
- **ElevenLabs**: Text-to-Speech
- **Google Gemini**: AI Fallback

---

## üìã –ó–ê–í–ò–°–ò–ú–û–°–¢–ò –ú–ï–ñ–î–£ –ú–û–î–£–õ–Ø–ú–ò

### üîÑ –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```
app_current_backup.py
‚îú‚îÄ‚îÄ api/apify_client.py
‚îú‚îÄ‚îÄ api/assemblyai_client_improved.py
‚îú‚îÄ‚îÄ api/openai_client.py
‚îú‚îÄ‚îÄ api/elevenlabs_simple.py
‚îú‚îÄ‚îÄ templates/module_trends.html
‚îî‚îÄ‚îÄ templates/base.html
```

### üìä –°–≤—è–∑–∏
- **app_current_backup.py** ‚Üí –í—Å–µ API –∫–ª–∏–µ–Ω—Ç—ã
- **API –∫–ª–∏–µ–Ω—Ç—ã** ‚Üí –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
- **templates** ‚Üí app_current_backup.py
- **static** ‚Üí templates

---

## üéØ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

### üöÄ –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- **Step 6**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ (HeyGen)
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: Redis –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: Prometheus + Grafana
- **CI/CD**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å
- **–¢–µ—Å—Ç—ã**: Unit –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
- **–ú–µ—Ç—Ä–∏–∫–∏**: –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ—à–∏–±–∫–∏

---

**‚úÖ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é –∏ —Ä–∞–∑–≤–∏—Ç–∏—é!** üéâ
