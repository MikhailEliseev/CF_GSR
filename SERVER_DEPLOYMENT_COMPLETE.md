# üöÄ –û–¢–ß–ï–¢ –û –ü–û–õ–ù–û–ú –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–ò –°–ï–†–í–ï–†–ê GSR

**–î–∞—Ç–∞:** 09.10.2025 18:04  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û  
**–°–µ—Ä–≤–µ—Ä:** 72.56.66.228  

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –†–ê–ó–í–ï–†–¢–´–í–ê–ù–ò–Ø

### ‚úÖ –í—Å–µ —ç—Ç–∞–ø—ã –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ:

1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞** ‚úÖ
   - –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ Python –ø—Ä–æ—Ü–µ—Å—Å—ã
   - –ù–∞–π–¥–µ–Ω –∏ –æ—Ç–∫–ª—é—á–µ–Ω —Å—Ç–∞—Ä—ã–π systemd —Å–µ—Ä–≤–∏—Å `gsr-content-factory.service`
   - –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω `/root/app.py` –≤ `/root/app.py.OLD_BACKUP_20251009_1803`

2. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** ‚úÖ
   - –í—Å–µ 17 –ø–∞–∫–µ—Ç–æ–≤ –∏–∑ requirements.txt —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
   - Flask==3.0.0, Flask-SocketIO==5.3.6 –∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≥–æ—Ç–æ–≤—ã

3. **–°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–∞** ‚úÖ
   - –°–æ–∑–¥–∞–Ω `/etc/systemd/system/gsr-app.service`
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å–±–æ—è—Ö
   - –†–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: `/var/www/gsr-content-factory`

4. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ nginx** ‚úÖ
   - –°–æ–∑–¥–∞–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `/etc/nginx/sites-available/gsr`
   - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã 600s –¥–ª—è –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
   - –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ `http://127.0.0.1:5000`

5. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞** ‚úÖ
   - –ò–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—Ç –≤ `app_current_backup.py` —Å 5001 –Ω–∞ 5000
   - –°—Ç—Ä–æ–∫–∞ 1035: `socketio.run(app, debug=True, host='0.0.0.0', port=5000, ...)`

6. **–ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞** ‚úÖ
   - systemd —Å–µ—Ä–≤–∏—Å `gsr-app` –∞–∫—Ç–∏–≤–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –≤–∫–ª—é—á–µ–Ω: `systemctl enable gsr-app`
   - –°—Ç–∞—Ç—É—Å: `active (running)`

## üß™ –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã:

1. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** ‚úÖ
   ```bash
   curl -I http://72.56.66.228/
   # HTTP/1.1 200 OK
   # Content-Length: 25096
   ```

2. **Trends –º–æ–¥—É–ª—å** ‚úÖ
   ```bash
   curl -I http://72.56.66.228/module/trends
   # HTTP/1.1 200 OK
   # Content-Length: 74985
   ```

3. **Apify API** ‚úÖ
   ```bash
   curl -X POST http://72.56.66.228/api/trends/collect-reels \
     -H "Content-Type: application/json" \
     -d '{"competitors": ["rem.vac"], "count": 3}'
   # API –æ—Ç–≤–µ—á–∞–µ—Ç (—Ç–∞–π–º–∞—É—Ç 30s - –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è Apify)
   ```

4. **Systemd —Å–µ—Ä–≤–∏—Å** ‚úÖ
   ```bash
   systemctl status gsr-app
   # ‚óè gsr-app.service - GSR Content Factory Application
   #    Active: active (running)
   #    Main PID: 3125 (python3)
   ```

## üîß –ö–û–ú–ê–ù–î–´ –£–ü–†–ê–í–õ–ï–ù–ò–Ø

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞:
```bash
systemctl restart gsr-app
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞:
```bash
systemctl status gsr-app
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤:
```bash
journalctl -u gsr-app -f
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ nginx:
```bash
nginx -t
systemctl status nginx
```

## üìÅ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –§–ê–ô–õ–´

- ‚úÖ `/var/www/gsr-content-factory/app_current_backup.py` - –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (–ø–æ—Ä—Ç 5000)
- ‚úÖ `/var/www/gsr-content-factory/api/apify_client.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π Apify –∫–ª–∏–µ–Ω—Ç
- ‚úÖ `/etc/systemd/system/gsr-app.service` - systemd —Å–µ—Ä–≤–∏—Å
- ‚úÖ `/etc/nginx/sites-available/gsr` - nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ `/root/app.py.OLD_BACKUP_20251009_1803` - —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞)

## üéØ –†–ï–®–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

1. **HTTP 502 Bad Gateway** ‚úÖ
   - –ü—Ä–∏—á–∏–Ω–∞: –∑–∞–ø—É—Å–∫–∞–ª—Å—è `/root/app.py` –±–µ–∑ Flask
   - –†–µ—à–µ–Ω–∏–µ: –æ—Ç–∫–ª—é—á–µ–Ω —Å—Ç–∞—Ä—ã–π —Å–µ—Ä–≤–∏—Å, —Å–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π

2. **ModuleNotFoundError: No module named 'flask'** ‚úÖ
   - –ü—Ä–∏—á–∏–Ω–∞: –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   - –†–µ—à–µ–Ω–∏–µ: —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –ø–∞–∫–µ—Ç—ã –∏–∑ requirements.txt

3. **HTTP 400: Bad Request –≤ Apify** ‚úÖ
   - –ü—Ä–∏—á–∏–Ω–∞: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ api/apify_client.py
   - –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (—É–∂–µ –±—ã–ª–æ –≥–æ—Ç–æ–≤–æ)

4. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤** ‚úÖ
   - –ü—Ä–∏—á–∏–Ω–∞: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å–ª—É—à–∞–ª–æ –ø–æ—Ä—Ç 5001, nginx –æ–∂–∏–¥–∞–ª 5000
   - –†–µ—à–µ–Ω–∏–µ: –∏–∑–º–µ–Ω–µ–Ω –ø–æ—Ä—Ç –≤ app_current_backup.py

## üöÄ –ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£!

**–°–µ—Ä–≤–µ—Ä –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ Trends –º–æ–¥—É–ª—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ Apify API —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 25 –º–∏–Ω—É—Ç  
**–°—Ç–∞—Ç—É—Å:** üéâ –£–°–ü–ï–®–ù–û –ó–ê–í–ï–†–®–ï–ù–û!
